# Сортируемые списки

`Sortable` - стандартный виджет сортируемых списков для RightJS

<%= partial '/ui/head', :locals => {:name => 'sortable'} %>


<%= anchors_index %>


## Список возможностей, :features

Сортируемые списки обладают следующими возможностями:

* Дружелюбен к RESTful дизайну
* Автоматическое распознавание направления списка
* Поддержка автоматической инициализации
* Позволяет перетаскивать элементы между списками
* Очень маленький размер (меньше 2k gzipped)
* Не требует для работы библиотеку drag-n-drop


## Базовое использование, :usage

Существует несколько способов создания сортируемых списков. Во-первых вы можете
использовать класс `Sortable` напрямую из вашего JavaScript кода

    new Sortable('todos', { url: '/todos' });

Другой способ создания сортируемых списков, это авто-инициализация с использованием
атрибута `data-sortable` и опций в HTML5 стиле

    // простой список
    <ul data-sortable="">
      <li>Item 1</li>
      <li>Item 2</li>
    </ul>


    // удаленный список
    <ul data-sortable="{url: '/todos'}">
      <li id="item_1">Покормить рыбку</li>
      <li id="item_2">Позвонить маме</li>
    </ul>


## Список опций, :options

Вы так же можете использовать следующий список опций

Имя       | Умолчание  | Описание
----------|------------|---------------------------------------------------------------------
url       | null       | url-адрес для отправки изменений на сервер, может содержать плейсхолдер '%{id}'
method    | 'put'      | метод для {Xhr} запросов
Xhr       | {}         | дополнительные {Xhr} опции
idParam   | 'id'       | имя параметра для ID элемента
posParam  | 'position' | имя параметра для позиции элемента
parseId   | true       | флаг, если необходимо выделить номер из ID элемента перед отправкой
accept    | null       | ссылка или список ссылок на другие сортируемые списки с которыми можно обмениваться элементами
minLength | 1          | минимальное количество элементов которое должно оставаться в списке
itemCss   | 'LI'       | css-правило для перетаскиваемых элементов
handleCss | 'LI'       | css-правило для элементов инициализирующих перетаскивание
cssRule   | '\*\[data-sortable\]' | css-правило для автоматически инициализируемых элементов


## Список событий, :events

Существует несколько событий которые вы можете использовать для работы с сортируемыми списками

Название | Описание
---------|----------------------------------------------------
start    | когда пользователь начинает перетаскивать элемент
change   | когда элемент перепрыгивает на новое место
finish   | когда пользователь отпускает элемент


    new Sortable('todos', {
      onChange: function(event) {
        event.list;  // ссылка на объект списка
        event.item;  // ссылка на объект элемента
        event.index; // индекс элемента в списке
        event.event; // ссылка на оригинальный dom-event
        // ....
      }
    });


## Url-адреса и обработка вызовов, :remote

В обычном варианте использования, все просто. Есть набор стандартных опций, как то `url`, `method`
и т.п. вы просто указываете их и при каждом изменении в списке, скрипт автоматически отсылает
результаты на сервер.

    new Sortable('boo', {
      url: '/the/url/address'
    });

Дополнительно вы можете использовать в url-адресах плейсхолдер `'%{id}'`, для создания более
дружелюбных для RESTful дизайна адресов.

    new Sortable('boo', {
      url: 'todos/%{id}.js'
    });

В данном случае скрипт будет автоматически считывать атрибуты ID передвигаемых элементов,
опционально выделять из них целочисленный номер и отправлять результаты на адреса подобные
следующим

    /todos/1.js
    /todos/2.js
    .....
