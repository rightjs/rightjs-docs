# Календарь

`Calendar` - это стандартный виджет календаря для RightJS

<%= partial '/ui/head', :locals => {:name => 'calendar'} %>

<%= anchors_index %>


## Список возможностей, :features

Виджет календаря имеет следующие возможности:

* Выбор даты и времени для полей ввода
* Поддержка таблиц из нескольких месяцев
* Поддержка минимальных/максимальных дат
* Может работать как независимый виджет
* Авто-инициализация через HTML5 атрибут
* Маленький (всего 6k gzipped) размер
* Никаких зависимых файлов css или картинок
* Поддержка интернационализации


## Основы использования, :usage

Использование этого виджета очень простое. Просто подключите файл обычным образом

    <script src="/javascripts/right-calendar.js"></script>

И после этого вы сможете создавать ваши календари с помощью класса `Calendar`

    new Calendar({format: 'EUR'}).insertTo('that-element');

    new Calendar({showTime: true}).assignTo('that-input');



## Авто-инициализация, :initialization

Виджет календаря так же может автоматически инициализироваться на полях ввода
через стандартный для RightJS HTML5 атрибут `data-calendar`

    <input type="text" data-calendar="" />

    <input type="text" data-calendar="{format: 'US'}" />

Так же можно указывать отдельный триггер для календаря, скажем иконку

    <input type="text" id="my-input" />
    <img src="calendar.png" data-calendar="{update: 'my-input'}" />

В любом случае инциализация просиходит только тогда когда пользователь начинает
непосредственно взаимодействовать с помеченными элементами


## Список опций, :options

Существует следующий список опций которые вы можете использовать с виджетами календаря

Название       | Умолчание  | Описание
---------------|------------|-------------------------------------------------------------------
format         | 'ISO'      | шаблон даты или имя предустановленного формата
showTime       | null       | флаг, если виджет должен показывать поля выбора времени
twentyFourHour | null       | флаг, какой формат времени должен использоваться 12 или 24 часовой
timePeriod     | 1          | минимальный квант времени, в минутах
showButtons    | false      | флаг, если виджет должен показывать снизу кнопки
minDate        | null       | минимальная дата которую можно выбрать
maxDate        | null       | максимальная дата которую можно выбрать
listYears      | false      | флаг, если виджет должен показывать кнопки для листания годов
firstDay       | 1          | с какого дня начинается неделя `1` c понедельника, `0` с воскресенья
numberOfMonths | 1          | число месяцев на календаре, или размер сетки \[x,y\]
fxName         | 'fade'     | имя визуального эффекта или `null` чтобы отключить
fxDuration     | 'short'    | длительность визуального эффекта
hideOnPick     | false      | флаг чтобы скрывать календарь после того как пользователь выберет дату
update         | null       | поле ввода которое нужно обновлять когда пользователь выбирает дату
trigger        | null       | ссылка на элемент внешнего триггера для всплывающего календаря
cssRule        | '\*\[data-calendar\]' | css-правило для автоматически инициализируемых полей

Вы можете использовать любые из перечисленных опций совместно с каждым отдельно взятым виджетом
или же изменить настройки глобально в переменной `Calendar.Options`.

Опции `showTime` и `twentyFourHour` имеют значение `null` по умолчанию. Это означает, что
скрипт будет определять их автоматически по строке шаблона даты. Но вы так же можете указать их в
какое-либо значение вручную.


## Форматы дат, :formatting

Виджет календаря использует систему формата дат
[GNU strftime](http://www.gnu.org/software/libc/manual/html%5Fnode/Formatting-Calendar-Time.html#index-strftime-2660)
и поддерживает следующие ключи:

Имя | Описание
----|------------------------------------------------------------------------
%a  | Короткое название дня недели ('Вск')
%A  | Полное название дня недели ('Воскресенье')
%b  | Короткое название месяца ('Янв')
%B  | Полное название месяца ('Январь')
%d  | День месяца (01..31)
%e  | День месяца без начального нуля (1..31)
%m  | Номер месяца в году (01..12)
%y  | Год без века (00..99)
%Y  | Полный номер года
%H  | Час дня в 24-х часовом формате (00..23)
%k  | Час дня в 24-х часовом формате без начального нуля (0..23)
%I  | Час дня в 12-ти часовом формате (01..12)
%l  | Час дня в 12-ти часовом формате без начального нуля (0..12)
%p  | Индикатор меридиана ('AM'  or  'PM')
%P  | Индикатор меридиана ('pm'  or  'pm')
%M  | Минуты (00..59)
%S  | Секунды (00..59)
%%  | Символ '%'

Так же доступно несколько предустановленных стандартных форматов:


Имя   | Формат     | Пример
------|------------|--------------------
ISO   | '%Y-%m-%d' | 2009-08-18
POSIX | '%Y/%m/%d' | 2009/08/18
EUR   | '%d-%m-%Y' | 18-08-2009
US    | '%m/%d/%Y' | 08/18/2009


## Список событий, :events

Календари поддерживают следующий список событий

Имя    | Описание
-------|-------------------------------------------------
show   | календарь был показан
hide   | календарь был скрыт
select | пользователь выбирает дату/время
done   | пользователь нажимает кнопку "Готово"

Вы можете использовать все стандартные методы модуля {Observer} для работы с данными
событиями. Сокращенные методы вроде `onSelect`, `onDone` так же доступны.


## API Документация, :api

Виджет календаря имеет тот же самый интерфейс что и любой объект класса {Element} плюс
несколько своих методов

Метод                       | Описание
----------------------------|----------------------------------------------------------------------
setDate(date)               | устанавливает дату, это может быть объект даты или строка
getDate()                   | возвращает текущую дату в виде объекта даты
setValue(String date)       | устанавливает дату
getValue()                  | возвращает дату в виде строки
format(\[String format\])   | возвращает текущую дату в виде строки
assignTo(element\[,trigger\]) | назначает календарь работать с указанным полем ввода. можно так же указать элемент по клику на котором календарь будет показываться/скрываться


## Настройки стилей, :styles

Если вам необходимо настроить виджет календаря для того чтобы он больше подходил к
вашему дизайну, вы можете использовать следующее описание структуры элементов, как
руководство к действию.

    <div class="rui-calendar rui-panel">
      <div class="swaps">
        <div class="rui-button next-month">&lsaquo;</div>
        <div class="rui-button prev-month">&rsaquo:</div>
      </div>

      <table class="greed">
        <tr><td>

          <table class="month">
            <caption>January</caption>
            <thead><tr>
              <th>Mo<th>Tu<th>...
            </tr></thead>
            <tbody>
              <tr>
                <td class="blank">
                <td class="selected">
                <td class="disabled">
                <td><td><td><td>...
              .....
            </tbody>
          </table>

        </td></tr>
      </table>

      <div class="timepicker">
        <select></select> : <select></select>
      </div>

      <div class="buttons">
        <div class="rui-button">Now</div>
        <div class="rui-button">Done</div>
      </div>
    </div>
