# RightJS RTE

`RRTE` это стандартный виджет полнотекстного редактора для RightJS. Он
инициализируется поверх обычных textarea элементов и создан для того чтобы
работь в составе форм.

<%= partial '/ui/head', :locals => {:name => 'rte'} %>

<%= anchors_index %>


## Список особенностей, :features

* Не использует фреймы
* Позоляет конфигурировать форматирование
* Миниатюрный размер (~ 10k gzipped)
* Очень прост в использовании


## Основы использования, :usage

RRTE создан для того чтобы как можно упростить процесс работы с
полнотекстовыми редакторами. Все что вам нужно для того чтобы добавить RTE
на вашу форму, это подключить один из вышеперечисленных файлов на страницу
и сохранить [эту картинку](/images/rightjs-ui/rte.png) в том же месте на
вашем сервере.

После этого просто используйте стандартный для RightJS UI атрибут `data-rte`
на нужном элемете textarea

    <textarea name="text" data-rte="{}">
      Ваш <b>HTML</b> <u>контет</u> <i>тут</i>
    </textarea>

Это все. RRTE автоматически найдет ваш textarea элемент и создаст на его
месте полнотекстовый редактор.

Вы так же можете инициализировать RTE виджеты программно

    var rte = new Rte('my-textarea-id', {
      // опции
    });

или даже так

    $('my-textarea-id').getRich({
      // опции
    });

В любом случае, RRTE автоматически будет поддерживать данные виджета и элемета
textarea синхронизированными, так, что когда пользователь закончит
редактировать текст и отправит форму, все будет выглядеть так, будто он заполнил
поле textarea напрямую.


## Настройки размеров, :sizes

По-умолчанию, когда RRTE инициализируется, он установит свою ширину равной
ширине оригинального поля textarea и будет растягиваться вертикально, так,
чтобы вместить весь контент.

Если вы не желаете чтобы ваш RTE менял высоту автоматически, просто укажите
опцию `autoresize: false` и тогда он будет установит размеры так как они были
указаны изначально для поля textarea.

В целом, просто настраивайте размеры вашего поля textarea с помощью CSS и
RRTE их скопирует.


## Настройки панели инструментов, :toolbars

RRTE имеет несколько пресетов для панелей инструментов которые хранятся в
объекте `Rte.Toolbars`. По умолчанию доступно три из них: `'small'`,
`'basic'` и `'extra'`. Вы можете использовать эти имена с опцией `'toolbar'`.

    <textarea data-rte="{toolbar: 'basic'}"></textarea>

    // или программно
    var rte = new Rte('my-textarea', {
      toolbar: 'extra'
    });

Вы можете изменять пресеты, если необходимо и создавать свои собственные.
Запустите

    console.log(Rte.Toolbars);

для примеров, как это делается. Индекс всех доступных инструментов можно
найти в объекте `Rte.Tools`.

И последнее, вы так же можете указать полное определение нужного вам тулбара
с опцией `toolbar` вместо имени пресета.


## Настройки форматирования, :formatting

В отличии от всех прочих RTE существующих в природе. RRTE позволяет вам
настраивать какие именно тэги должны быть использованы для форматирования
тех или иных элеметов странцы. Эти настройки разбиты на несколько блоков.

Во-первых, базовые инструменты форматирования описаны в объекте `Rte.Tags`

    Rte.Tags = {
      Bold:      'b',
      Italic:    'i',
      Underline: 'u',
      Strike:    's',
      Ttext:     'tt',
      Code:      'pre',
      Quote:     'blockquote',
      Header:    'h2'
    };

Ключи данного хэша ссылются на имена инструметов (кнопок в панели), а
значения указывают имена тэгов, которые данные инструменты будут использовать
для форматирования текста.

Блок выпадающего меню с предопределенными видами форматирования описан
в объекте `Rte.Formats`

    Rte.Formats = {
      'h1':         'Header 1',
      'h2':         'Header 2',
      'h3':         'Header 3',
      'h4':         'Header 4',
      'p':          'Paragraph',
      'pre':        'Preformatted',
      'blockquote': 'Blockquote',
      'tt':         'Typetext',
      'address':    'Address'
    };

В данном случае, ключи указывают имена тэгов используемых при форматировании,
а значения - это текст надписей которые будут видны в выпадающем меню.

Вы можете манипулировать этим списком как вам необходимо, убирать ненужные и
добавлять требующиеся виды форматирования. В дополнение к именам тэгов
вы можете указать так же имя css-класса (одного)

    Rte.Formats = {
      'div.blue':     'Синий блок',
      'code.example': 'Кусок кода',
      ....
    };

Списки шрифтов и их размеров выглядят следующим образом

    Rte.FontNames = {
      'Andale Mono':     'andale mono,times',
      'Arial':           'arial,helvetica,sans-serif',
      'Arial Black':     'arial black,avant garde',
      'Book Antiqua':    'book antiqua,palatino',
      'Comic Sans MS':   'comic sans ms,sans-serif',
      'Courier New':     'courier new,courier',
      'Georgia':         'georgia,palatino',
      'Helvetica':       'helvetica',
      'Impact':          'impact,chicago',
      'Symbol':          'symbol',
      'Tahoma':          'tahoma,arial,helvetica,sans-serif',
      'Terminal':        'terminal,monaco',
      'Times New Roman': 'times new roman,times',
      'Trebuchet MS':    'trebuchet ms,geneva',
      'Verdana':         'verdana,geneva',
      'Webdings':        'webdings',
      'Wingdings':       'wingdings,zapf dingbats'
    };

    Rte.FontSizes = '6pt 7pt 8pt 9pt 10pt 11pt 12pt 14pt 18pt 24pt 36pt';

Они так же доступны для изменений.



## Keyboard Shortcuts, :keyboard

RRTE имеет очень простые настройки для клавиатурных шорткатов. Все они
хранятся в объекте `Rte.Shortcuts`

    Rte.Shortcuts = {
      Bold:      'b',
      Italic:    'i',
      Underline: 'u',
      Header:    'h',
      Link:      'l',
      Cut:       'x',
      Copy:      'c',
      Paste:     'v',
      Undo:      'z',
      Redo:      'shift+z',
      Source:    'e',
      Code:      'p',
      Save:      's'
    };

В данном случае, ключи указывают на имена инструментов, а значения
указывают кнопки клавиатуры. Сокращения работают как с `Ctrl` так и
с `Cmd` модификаторами, так что будут удобны и маздаям и яблочникам


## Список опций, :options

Вы можете использовать следующий список опций с RRTE

Название    | Умолчание | Описание
------------|-----------|--------------------------------------------
toolbar     | 'small'   | тулбар, имя пресета или полное описание
autoresize  | true      | автоматически изменять высоту редактора
showToolbar | true      | показывать тулбар
showStatus  | true      | показывать строку состояния
videoSize   | '425x344' | размер флеш-видео блоков по умолчанию


## Список событий, :events

Все объекты класса `Rte`, в дополнение к стандартным объектам класса
{Element} поддерживают следующие события

Название | Описание
---------|-------------------------------------------
change   | когда контент был изменен
focus    | когда редактор попал в фокус
blur     | когда редактор потерял фокус


## API документация, :api

Точно так же как и все прочие виджеты RightJS UI, RRTE - это подкласс
класса {Element}, что означает что вы можете манипулировать объектами типа
`Rte` так же как и любыми другими элеметами страницы. Вы можете вставлять
их куда требуется, а так же управлять его содержимым напрямую.

В дополнение к стандартным методам, класс `Rte` так же получил следующие
несколько методов для того чтобы эмулировать объекты типа {Input}

Название              | Описание
----------------------|----------------------------------------------------
setValue(value)       | устанавливет значение виджета как HTML строку
getValue()            | считывает значение виджета как HTML строку
value(\[value\])      | двунаправленый метод для установки/считывания данных
disable()             | блокирует редактор
enable()              | разблокирует редактор
focus()               | помещает фокус в редактор
blur()                | убирает фокус с редактора
assignTo(\[texarea\]) | подключает RTE для работы в паре с textarea элементом


## Настройки Стилей, :styles

В отличие от других RTE, RRTE не использует фреймы и представляет собой
достаточно простую HTML конструкцию следующего вида

    <div class="rui-rte">
      <div class="rui-rte-toolbar">
        <div class="line">
          <div class="bar">
            <div class="tool bold"><div class="icon"></div></div>
            <div class="tool italic"><div class="icon"></div></div>
            <div class="tool underline"><div class="icon"></div></div>
            .....
          </div>
          ....
        </div>
        .....
      </div>

      <div class="rui-rte-editor">
        // Ваш контент тут
      </div>

      <div class="rui-rte-status">
        <a href="">tag</a>
        ....
      </div>
    </div>

__ВНИМАНИЕ__: т.к. RRTE не использует фреймов, весь контент видимый в поле
редактора, будет следовать текущим стилям на странице. Поэтому если вам
необходимо настроить вид контента внутри редактора, просто добавьте ваши
стили прямо на страницу и они будут работать в редакторе автоматически.
