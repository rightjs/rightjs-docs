# Таблицы

Плагин `table` - это dom-обертка созданная специально для работы с таблицами.
Он предоставляет новый класс `Table` который имеет несколько дополнительных
методов и позволяет динамически сортировать таблицы по колонкам.

<%= partial '/plugins/download', :locals => {:name => 'table'} %>

## Сортировка таблиц, :sorting

Если вам необходимы динамически сортируемые таблицы в вашем приложении, то нет
ничего проще. Все что нужно, это подключить плагин на вашу страницу и
пометить сортируемые колонки классом `sortable`

    <table>
      <tr>
        <th class="sortable">Название</th>
        <th class="sortable numeric">Цена</th>
        ....
      </tr>
      ...
    </table>

Как видите вы можете использовать обычную, текстовую сортировку или же указать
скрипту, что данная колонка содержит только числовые данные.

__ВНИМАНИЕ__: для того чтобы все работало правильно, необходимо использовать
тэг `TH`!.


## Живой пример, :example
<% content_for :modules, javascript_include_tag('/builds/plugins/right-table.js') %>
<style type="text/css">
  table th.sortable {
    cursor: pointer;
  }
  table th.sortable:hover {
    background-color: #DFDEBD;
  }
  table th span.sort-marker {
    color: #444;
    margin-left: .5em;
  }
</style>

Небольшой живой пример работы скрипта. У нас есть колонка с обычными числами,
есть колонка с обычным текстом, так же колонка с числами использующими дефис в
качестве разделителя и немного HTML данных

<p>
  <table>
    <tr>
      <th class="sortable numeric">№</th>
      <th class="sortable">Название</th>
      <th class="sortable numeric">Цена</th>
      <th class="sortable">Описание</th>
    </tr>
    <tr>
      <td>1</td>
      <td>Банан</td>
      <td>1-11</td>
      <td><em>Ба</em>на<strong>н</strong></td>
    </tr>
    <tr>
      <td>2</td>
      <td>Яблоко</td>
      <td>1-01</td>
      <td><em>Я</em><strong>бло</strong>ко</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Апельсин</td>
      <td>1-10</td>
      <td><em>Ап</em>е<u>ль</u>син</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Пэрсик</td>
      <td>2-00</td>
      <td><u>Пэ</u>р<em>си</em>к</td>
    </tr>
  </table>
</p>

## API документация, :api

Данный плагин добавляет в систему класс `Table`, который, как и все прочие
dom-обертки позволяет вам инициализировать таблицы программно

    var table = new Table({id: 'my-table'})
      .insertTo(document.body)
      .addClass('pretty-table');

или же, вы можете просто найти вашу таблицу на странице любым стандартным
способом.

    $('my-table'); // -> Table

В том или ином случае, ваша таблица будет динамически завернута в объект
класса `Table` который является наследником класса {Element}

    var table1 = new Table({id: 'my-table'});
    var table2 = $('my-table');

    table1 instanceof Table; // -> true
    table2 instanceof Table; // -> true

    table1 instanceof Element; // -> true
    table2 instanceof Element; // -> true

Класс `Table` так же предоставляет несколько дополнительных методов

Название | Описание
---------|--------------------------------------------------------------
sort(column\[, order\[, type\]\]) | сортирует таблицу по колонке
rows()   | возвращает массив рядов таблицы с данными (без хидеров и футеров)
header() | возвращает массив рядов хидера таблицы
footer() | возвращает массив рядов футера таблицы

Метод `Table#sort`, окромя индекса колонки, может принимать аргумент `order`,
указывающий в каком порядке сортировать таблицу (`'asc'` or `'desc'`).

Так же вы можете передать третий аргумент `type` который будет укатывать на
тип используемой сортировки. Это может быть одно из следующих:

* `'text'` (по-умолчанию) - сортировать колонку как обычный текст
* `'numeric'` - сортировать колонку как набор числовых данных
* любая другая функция описывающая ваш собственный алгоритм

## Список опций, :api

Так же существует набор опций которые вы можете использовать через объект
`Table.Options` или же через стандартный атрибут `data-table`

Название   | Умолчание  | Описание
-----------|------------|-----------------------
ascMarker  | '&#x25BC;' | маркер прямой сортировки
descMarker | '&#x25B2;' | маркер обратной сортировки
algorithm  | 'text'     | тип сортировки по умолчанию 'text' / 'numeric'
order      | 'asc'      | направление сортировки по умолчанию 'asc' или 'desc'

Вот в общем-то и все.