# Безопасный режим и иже с ним

Начиная с версии 2.0.0 RightJS предоставляет возможность использовать его
в безопасном режиме, и данная статья призвана ответить на все основные вопросы
на соответствующую тему

<%= anchors_index %>

## Обычный режим, :normal

Обычный режим, это то к чему мы все привыкли в RightJS 1. В обычном режиме
RightJS расширяет ядро JavaScript и предоставляет все свои функции и классы
в глобальном пространстве имен.

Обычный режим предназначен для тех случаев, когда вы используете RightJS как
основной фреймворк в вашем приложении и хотите иметь быстрый и удобный доступ
ко всей функциональности.

Все примеры и документация на данном сайте описывают RightJS в этом самом
что ни на есть обычном режиме


## Безопасный режим, :safe

Безопасный режим в RightJS представлен специальной сборкой которую можно
скачать на [странице загрузок](/download).

В безопасном режиме RightJS ничего не расширяет и не помещает никаких функций
в глобальное пространство имен (за исключением естественно самого объекта
`RightJS`). Идея в том, чтобы предоставить вам версию RightJS которая будет
полностью прозрачна и незаметна для всех прочих скриптов на странице, так что
вы могли бы использовать RightJS совместно с любыми другими библиотеками не
волнуясь о возможных коллизиях имен или функциональности.

Это возможно звучит немного замысловато, но на деле все очень и очень просто.
В целом вы имеете все тоже самое что и в нормальном режиме, просто для доступа
к функциям и классам, вы должны использовать префикс `RightJS.`.

    var element = new RightJS.Element('div');
    var Klass   = new RightJS.Class({});

    RightJS.Xhr.load('/my/url', {spinner: 'my-spinner-id'});

    RightJS.$('element-id')
      .addClass('boo hoo')
      .onClick('toggleClass', 'marked')
      .set('title', 'Boo hoo!')
      ...

    RightJS.$$('div.css-rule').each(function(element) {
      element.onClick('toggleClass', 'marked');
    });

`RightJS` это по сути обычный объект, вы можете переименовать его,
использовать как аргумент или, если вы чувствуете себя достаточно удачливой
человекой, вы даже можете делать вызовы с `with`

    var R = RightJS;

    R.$('my-id');
    R.$$('div.class');

    with (RightJS) {
      var Klass = new Class(Observer, {
        EVENTS: $w('one two three'),

        initialize: function() {

        }
      });
    }

В безопасном режиме RightJS не расширяет ядро JavaScript, но вы все равно
имеете возможность получить доступ ко всем доп. методам просто пропустив ваши
данные через объект `RightJS` как через функцию.

    var R = RightJS;

    'boo hoo!'.endsWith('!');    // ошибка 'no such method'
    R('boo hoo!').endsWith('!'); // true

    4..times(function(i) {});    // ошибка 'no such method'
    R(4).times(function(i) {});  // работает как и задумывалось

    ['any banny twenny'].random();    // ошибка
    R(['any banny twenny']).random(); // возможно 'banny'

    R(function() {}).bind(context);

    R.Object.merge(hash1, hash2, hash3);
    R.RegExp.escape('{[<**?/]}');
    R.Math.random(1, 4);

И т.д.

Таким образом вы можете полностью использовать все возможности RightJS не
вызывая конфликтов с другими скриптами на странице.


## Полубезопасный режим, :semi-safe

Полубезопасный режим, не являет собою какой-то специально существующий режим,
это скорее концепция которую вы можете использовать с RightJS.

Дело в том, что RightJS инциализируется внутри собственного приватного
пространства, а все глобальные функции и классы, это просто ссылки на
функциональность находящуюся внутри пространства RightJS.

В результате чего, все что вы видели в разделе безопасного режима точно так
же работает и в нормальном режиме. Это нужно для того, что если вы скажем
пишете плагин и хотите чтобы он работал в обоих, безопасном и нормальном
режимах, вы можете писать ваш код для безопасного режима и он будет нормально
работать в обычном режиме.

Другой момент в том, что концепция полубезопасного режима позволяет вам менять
глобальные функции и классы. Т.к. RightJS больше от них не зависит, вы можете
заменить или удалить любую из глобальных переменных без вреда для самого
RightJS.

Для примера посмотрите плагин [jQuerysh](/plugins/jquerysh). Он меняет
поведение функции `$()` на то к чему привыкли пользователи jQuery. Теперь
вы можете легко и полностью легально делать такие вещи с RightJS.

